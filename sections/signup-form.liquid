<div class="signup-page">
  <div class="signup-container">
    <h1>Sign Up</h1>
    <p class="subtitle">Join our email list for updates, merch drops, and exclusives.</p>
    
    <form id="vip-signup-form" class="signup-form">
      <div class="form-row">
        <div class="form-group">
          <label for="first-name">First name</label>
          <input type="text" id="first-name" name="first_name">
        </div>
        <div class="form-group">
          <label for="last-name">Last name</label>
          <input type="text" id="last-name" name="last_name">
        </div>
      </div>
      
      <label for="email">Email address</label>
      <input type="email" id="email" name="email" required>
      
      <label for="tiktok">TikTok Username</label>
      <input type="text" id="tiktok" name="tiktok">
      
      <label for="phone">Phone number</label>
      <div class="phone-wrapper">
        <input type="tel" id="phone" name="phone">
        <select id="country-code" name="country_code">
          <option value="US">US</option>
          <option value="CA">CA</option>
          <option value="UK">UK</option>
          <option value="AU">AU</option>
        </select>
      </div>
      
      <label for="street-address">Street Address</label>
      <div id="autocomplete-container"></div>
      <input type="hidden" id="street-address" name="street_address">
      
      <label for="apartment">Apartment, suite, etc.</label>
      <input type="text" id="apartment" name="apartment">
      
      <label for="city">City</label>
      <input type="text" id="city" name="city">
      
      <label for="country">Country</label>
      <select id="country" name="country">
        <option value="">Select an option...</option>
        <option value="United States">United States</option>
        <option value="Canada">Canada</option>
        <option value="United Kingdom">United Kingdom</option>
        <option value="Australia">Australia</option>
        <option value="Germany">Germany</option>
        <option value="France">France</option>
        <option value="Japan">Japan</option>
        <option value="Mexico">Mexico</option>
      </select>
      
      <label for="zip">Zip/Postal code</label>
      <input type="text" id="zip" name="zip">
      
      <div class="checkbox-wrapper">
        <input type="checkbox" id="newsletter" name="newsletter" checked>
        <label for="newsletter">Subscribe to our newsletter</label>
      </div>
      
      <button type="submit">Sign Up</button>
    </form>
    
    <p class="success-message" id="success-msg">Thanks for signing up! You're on the VIP list.</p>
  </div>
</div>

<style>
  .signup-page {
    background: #fff;
    min-height: 100vh;
  }
  
  .signup-container {
    max-width: 780px;
    margin: 0 auto;
    padding: 60px 20px;
  }
  
  .signup-container h1 {
    font-family: inherit;
    font-size: 2.5rem;
    font-weight: 400;
    color: #ff69b4;
    margin-bottom: 20px;
  }
  
  .signup-container .subtitle {
    color: #d87093;
    font-size: 1rem;
    margin-bottom: 50px;
  }
  
  .signup-form {
    max-width: 520px;
    margin: 0 auto;
  }
  
  .signup-form label {
    display: block;
    color: #ff69b4;
    font-size: 0.95rem;
    margin-bottom: 8px;
    font-weight: 400;
  }
  
  .signup-form input,
  .signup-form select {
    width: 100%;
    padding: 14px 16px;
    margin-bottom: 24px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    font-size: 16px;
    box-sizing: border-box;
    background: #fafafa;
    color: #333;
  }
  
  .signup-form input:focus,
  .signup-form select:focus {
    outline: none;
    border-color: #ff69b4;
    background: #fff;
  }
  
  .signup-form select {
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ff69b4' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    cursor: pointer;
  }
  
  .form-row {
    display: flex;
    gap: 20px;
  }
  
  .form-row .form-group {
    flex: 1;
  }
  
  .form-group {
    margin-bottom: 0;
  }
  
  .phone-wrapper {
    display: flex;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 24px;
    background: #fafafa;
  }
  
  .phone-wrapper input {
    border: none;
    margin-bottom: 0;
    border-radius: 0;
    flex: 1;
  }
  
  .phone-wrapper select {
    border: none;
    margin-bottom: 0;
    border-radius: 0;
    width: auto;
    padding-right: 36px;
    background-color: transparent;
    border-left: 1px solid #e0e0e0;
  }
  
  .checkbox-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 30px 0;
  }
  
  .checkbox-wrapper input[type="checkbox"] {
    width: auto;
    margin: 0;
    accent-color: #ff69b4;
  }
  
  .checkbox-wrapper label {
    margin: 0;
    color: #d87093;
    font-size: 0.95rem;
  }
  
  .signup-form button {
    width: 100%;
    padding: 16px;
    background: #ff69b4;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s;
    font-weight: 500;
  }
  
  .signup-form button:hover {
    background: #ff85c1;
  }
  
  .success-message {
    display: none;
    color: #ff69b4;
    font-size: 1.2rem;
    text-align: center;
    margin-top: 30px;
  }
  
  /* Style the new Google PlaceAutocompleteElement */
  #autocomplete-container {
    margin-bottom: 24px;
  }
  
  gmp-place-autocomplete {
    width: 100%;
  }
  
  gmp-place-autocomplete::part(input) {
    width: 100%;
    padding: 14px 16px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    font-size: 16px;
    box-sizing: border-box;
    background: #fafafa;
    color: #333;
    font-family: inherit;
  }
  
  gmp-place-autocomplete::part(input):focus {
    outline: none;
    border-color: #ff69b4;
    background: #fff;
  }
  
  @media (max-width: 600px) {
    .form-row {
      flex-direction: column;
      gap: 0;
    }
    
    .signup-container h1 {
      font-size: 2rem;
    }
  }
</style>

<script>
  (g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]);for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})({
    key: "AIzaSyDjFDwjpwT-QdkEUHdCzeQsHEbsVDn2sLU",
    v: "weekly"
  });
</script>

<script>
  async function initAutocomplete() {
    await google.maps.importLibrary("places");
    
    const placeAutocomplete = new google.maps.places.PlaceAutocompleteElement({
      types: ['address']
    });
    
    document.getElementById('autocomplete-container').appendChild(placeAutocomplete);
    
    placeAutocomplete.addEventListener('gmp-placeselect', async ({ place }) => {
      await place.fetchFields({ fields: ['addressComponents', 'formattedAddress'] });
      
      const addressComponents = place.addressComponents;
      
      if (addressComponents) {
        let streetNumber = '';
        let route = '';
        
        addressComponents.forEach(function(component) {
          const type = component.types[0];
          
          if (type === 'street_number') streetNumber = component.longText;
          if (type === 'route') route = component.longText;
          if (type === 'locality') document.getElementById('city').value = component.longText;
          if (type === 'postal_code') document.getElementById('zip').value = component.longText;
          if (type === 'country') {
            const countrySelect = document.getElementById('country');
            const countryName = component.longText;
            for (let i = 0; i < countrySelect.options.length; i++) {
              if (countrySelect.options[i].value === countryName) {
                countrySelect.selectedIndex = i;
                break;
              }
            }
          }
        });
        
        document.getElementById('street-address').value = (streetNumber + ' ' + route).trim();
      }
    });
    
    // Form submission
    document.getElementById('vip-signup-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = {
        first_name: document.getElementById('first-name').value,
        last_name: document.getElementById('last-name').value,
        email: document.getElementById('email').value,
        tiktok: document.getElementById('tiktok').value,
        phone: document.getElementById('phone').value,
        country_code: document.getElementById('country-code').value,
        street_address: document.getElementById('street-address').value,
        apartment: document.getElementById('apartment').value,
        city: document.getElementById('city').value,
        country: document.getElementById('country').value,
        zip: document.getElementById('zip').value,
        newsletter: document.getElementById('newsletter').checked
      };
      
      fetch('/contact', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: new URLSearchParams({
          'form_type': 'customer',
          'utf8': 'âœ“',
          'customer[email]': formData.email,
          'customer[first_name]': formData.first_name,
          'customer[last_name]': formData.last_name,
          'customer[tags]': 'VIP, Newsletter',
          'customer[note][tiktok]': formData.tiktok,
          'customer[note][phone]': formData.country_code + ' ' + formData.phone,
          'customer[note][address]': formData.street_address,
          'customer[note][apartment]': formData.apartment,
          'customer[note][city]': formData.city,
          'customer[note][country]': formData.country,
          'customer[note][zip]': formData.zip
        })
      }).then(function() {
        document.getElementById('vip-signup-form').style.display = 'none';
        document.getElementById('success-msg').style.display = 'block';
      });
    });
  }
  
  initAutocomplete();
</script>

{% schema %}
{
  "name": "Signup Form",
  "settings": [],
  "presets": [
    {
      "name": "Signup Form"
    }
  ]
}
{% endschema %}